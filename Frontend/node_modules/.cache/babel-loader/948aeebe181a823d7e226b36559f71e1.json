{"ast":null,"code":"import _regeneratorRuntime from\"D:/S3Funny/enigma-parking/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/S3Funny/enigma-parking/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"D:/S3Funny/enigma-parking/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:/S3Funny/enigma-parking/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/S3Funny/enigma-parking/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"D:/S3Funny/enigma-parking/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"D:/S3Funny/enigma-parking/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/S3Funny/enigma-parking/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import AppNav from'../AppNav';import'../App.css';import{Container,Form,FormGroup,Input,Label,Button}from'reactstrap';import{Link}from'react-router-dom';import Datetime from\"react-datetime\";import Autosuggest from'react-autosuggest';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var guests;var getSuggestions=function getSuggestions(value){var inputValue=value.trim().toLowerCase();var inputLength=inputValue.length;return inputLength===0?[]:guests.filter(function(guest){return guest.firstName.toLowerCase().slice(0,inputLength)===inputValue;});};var getSuggestionValue=function getSuggestionValue(suggestion){return suggestion.firstName+\" \"+suggestion.lastName;};var renderSuggestion=function renderSuggestion(suggestion){return/*#__PURE__*/_jsxs(\"span\",{id:suggestion.accountId,children:[suggestion.firstName,\" \",suggestion.lastName]});};var EditAppointment=/*#__PURE__*/function(_Component){_inherits(EditAppointment,_Component);var _super=_createSuper(EditAppointment);function EditAppointment(props){var _this;_classCallCheck(this,EditAppointment);_this=_super.call(this,props);_this.handleSuggestionChange=function(event,_ref){var newValue=_ref.newValue;_this.setState({value:newValue});};_this.onSuggestionsFetchRequested=function(_ref2){var value=_ref2.value;_this.setState({suggestions:getSuggestions(value)});};_this.onSuggestionsClearRequested=function(){_this.setState({suggestions:[]});};_this.onSuggestionSelected=function(event,_ref3){var suggestion=_ref3.suggestion,suggestionValue=_ref3.suggestionValue,index=_ref3.index,method=_ref3.method;event.preventDefault();var appointment=_objectSpread({},_this.state.appointment);appointment.guestId=suggestion.accountId;_this.setState({appointment:appointment});};_this.state={value:'',suggestions:[],appointment:[],showGuestError:false,showEmailError:false,showStartDateError:false,showEndDateError:false};_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));_this.handleInputChange=_this.handleInputChange.bind(_assertThisInitialized(_this));_this.handleStartDatetimeChange=_this.handleStartDatetimeChange.bind(_assertThisInitialized(_this));_this.handleEndDatetimeChange=_this.handleEndDatetimeChange.bind(_assertThisInitialized(_this));return _this;}_createClass(EditAppointment,[{key:\"handleSubmit\",value:function(){var _handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var _this2=this;var appointment;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();if(!this.formValidation()){_context.next=5;break;}appointment=this.state.appointment;_context.next=5;return fetch('/appointment',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(appointment)}).then(function(response){if(response.ok){_this2.props.history.push(\"/calendar\");}});case 5:case\"end\":return _context.stop();}}},_callee,this);}));function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}return handleSubmit;}()},{key:\"formValidation\",value:function formValidation(){var validated=true;this.setState({showGuestError:false,showEmailError:false,showStartDateError:false,showEndDateError:false});var appointment=this.state.appointment;if(appointment.guestId===''){this.setState({showGuestError:true});validated=false;}if(appointment.employeeEmail===''){this.setState({showEmailError:true});validated=false;}if(appointment.appointmentStartDate===''){this.setState({showStartDateError:true});validated=false;}if(appointment.appointmentEndDate===''){this.setState({ShowEndDateError:true});validated=false;}return validated;}},{key:\"handleInputChange\",value:function handleInputChange(event){var target=event.target;var value=target.value;var name=target.name;var appointment=_objectSpread({},this.state.appointment);appointment[name]=value;this.setState({appointment:appointment});}},{key:\"handleStartDatetimeChange\",value:function handleStartDatetimeChange(date){var appointment=_objectSpread({},this.state.appointment);appointment.appointmentStartDate=date.toDate();this.setState({appointment:appointment});}},{key:\"handleEndDatetimeChange\",value:function handleEndDatetimeChange(date){var appointment=_objectSpread({},this.state.appointment);appointment.appointmentEndDate=date.toDate();this.setState({appointment:appointment});}},{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,body,guest,value;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch('/account');case 2:response=_context2.sent;_context2.next=5;return response.json();case 5:guests=_context2.sent;_context2.next=8;return fetch(\"/appointment/\".concat(this.props.match.params.id));case 8:response=_context2.sent;_context2.next=11;return response.json();case 11:body=_context2.sent;guest=guests.find(function(a){return a.accountId===body.guestId;});value='';if(guest){value=guest.firstName+\" \"+guest.lastName;}this.setState({value:value,appointment:body,isLoading:false});case 16:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this$state=this.state,value=_this$state.value,suggestions=_this$state.suggestions,appointment=_this$state.appointment,showGuestError=_this$state.showGuestError,showEmailError=_this$state.showEmailError,showStartDateError=_this$state.showStartDateError,showEndDateError=_this$state.showEndDateError;var inputProps={value:value,onChange:this.handleSuggestionChange};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(AppNav,{}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mt-5\",children:\"Edit Appointment\"}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(Container,{className:\"mt-5\",children:/*#__PURE__*/_jsxs(Form,{onSubmit:this.handleSubmit,children:[/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"guest\",children:\"Guest\"}),/*#__PURE__*/_jsx(Autosuggest,{name:\"guest\",id:\"guest\",suggestions:suggestions,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionValue:getSuggestionValue,renderSuggestion:renderSuggestion,onSuggestionSelected:this.onSuggestionSelected,inputProps:inputProps}),/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:showGuestError?'Missing Guest, make sure to select one from the suggestions':''})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"employeeEmail\",children:\"Email of Employee\"}),/*#__PURE__*/_jsx(Input,{type:\"email\",name:\"employeeEmail\",id:\"employeeEmail\",value:appointment.employeeEmail,onChange:this.handleInputChange}),/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:showEmailError?'Missing Email':''})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"appointmentStartDate\",children:\"Appointment Start Date\"}),/*#__PURE__*/_jsx(Datetime,{type:\"text\",name:\"appointmentStartDate\",id:\"appointmentStartDate\",value:new Date(appointment.appointmentStartDate),inputProps:{readOnly:true},locale:'nl',timeFormat:\"HH:mm\",onChange:this.handleStartDatetimeChange}),/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:showStartDateError?'Missing Start Date':''})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"appointmentEndDate\",children:\"Appointment End Date\"}),/*#__PURE__*/_jsx(Datetime,{type:\"text\",name:\"appointmentEndDate\",id:\"appointmentEndDate\",value:new Date(appointment.appointmentEndDate),inputProps:{readOnly:true},locale:'nl',timeFormat:\"HH:mm\",onChange:this.handleEndDatetimeChange}),/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:showEndDateError?'Missing End Date':''})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Button,{color:\"primary\",type:\"submit\",children:\"Save\"}),' ',/*#__PURE__*/_jsx(Button,{color:\"secondary\",tag:Link,to:\"/home\",children:\"Cancel\"})]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col\"})]})})]});}}]);return EditAppointment;}(Component);export default EditAppointment;","map":{"version":3,"sources":["D:/S3Funny/enigma-parking/src/Appointments/EditAppointment.js"],"names":["React","Component","AppNav","Container","Form","FormGroup","Input","Label","Button","Link","Datetime","Autosuggest","guests","getSuggestions","value","inputValue","trim","toLowerCase","inputLength","length","filter","guest","firstName","slice","getSuggestionValue","suggestion","lastName","renderSuggestion","accountId","EditAppointment","props","handleSuggestionChange","event","newValue","setState","onSuggestionsFetchRequested","suggestions","onSuggestionsClearRequested","onSuggestionSelected","suggestionValue","index","method","preventDefault","appointment","state","guestId","showGuestError","showEmailError","showStartDateError","showEndDateError","handleSubmit","bind","handleInputChange","handleStartDatetimeChange","handleEndDatetimeChange","formValidation","fetch","headers","body","JSON","stringify","then","response","ok","history","push","validated","employeeEmail","appointmentStartDate","appointmentEndDate","ShowEndDateError","target","name","date","toDate","json","match","params","id","find","a","isLoading","inputProps","onChange","color","Date","readOnly"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport AppNav from '../AppNav';\r\nimport '../App.css';\r\nimport {Container, Form, FormGroup, Input, Label, Button} from 'reactstrap';\r\nimport {Link} from 'react-router-dom';\r\nimport Datetime from \"react-datetime\";\r\nimport Autosuggest from 'react-autosuggest';\r\n\r\nlet guests;\r\n\r\nconst getSuggestions = value => {\r\n    const inputValue = value.trim().toLowerCase();\r\n    const inputLength = inputValue.length;\r\n\r\n    return inputLength === 0 ? [] : guests.filter(guest =>\r\n        guest.firstName.toLowerCase().slice(0, inputLength) === inputValue\r\n    );\r\n};\r\n\r\nconst getSuggestionValue = suggestion => suggestion.firstName + \" \" + suggestion.lastName;\r\n\r\nconst renderSuggestion = suggestion => (\r\n    <span id={suggestion.accountId}>\r\n        {suggestion.firstName} {suggestion.lastName}\r\n    </span>\r\n);\r\n\r\nclass EditAppointment extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            value: '',\r\n            suggestions: [],\r\n            appointment: [],\r\n            showGuestError: false,\r\n            showEmailError: false,\r\n            showStartDateError: false,\r\n            showEndDateError: false\r\n        };\r\n\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handleInputChange = this.handleInputChange.bind(this);\r\n        this.handleStartDatetimeChange = this.handleStartDatetimeChange.bind(this);\r\n        this.handleEndDatetimeChange = this.handleEndDatetimeChange.bind(this);\r\n    }\r\n\r\n    async handleSubmit(event) {\r\n        event.preventDefault();\r\n        if (this.formValidation()) {\r\n            const appointment = this.state.appointment;\r\n            await fetch('/appointment', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify(appointment),\r\n            }).then((response) => {\r\n                if (response.ok) {\r\n                    this.props.history.push(\"/calendar\");\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    formValidation(){\r\n        let validated = true;\r\n\r\n        this.setState({\r\n            showGuestError: false,\r\n            showEmailError: false,\r\n            showStartDateError: false,\r\n            showEndDateError: false\r\n        });\r\n\r\n        const appointment = this.state.appointment;\r\n        if ( appointment.guestId === '' ){\r\n            this.setState({showGuestError: true});\r\n            validated = false;\r\n        }\r\n        if ( appointment.employeeEmail === '' ){\r\n            this.setState({showEmailError: true});\r\n            validated = false;\r\n        }\r\n        if ( appointment.appointmentStartDate === '' ){\r\n            this.setState({showStartDateError: true});\r\n            validated = false;\r\n        }\r\n        if ( appointment.appointmentEndDate === '' ){\r\n            this.setState({ShowEndDateError: true});\r\n            validated = false;\r\n        }\r\n        return validated;\r\n    }\r\n\r\n    handleInputChange(event) {\r\n        const target = event.target;\r\n        const value = target.value;\r\n        const name = target.name;\r\n        let appointment = {...this.state.appointment};\r\n        appointment[name] = value;\r\n        this.setState({appointment});\r\n    }\r\n\r\n    handleStartDatetimeChange(date) {\r\n        let appointment = {...this.state.appointment};\r\n        appointment.appointmentStartDate = date.toDate();\r\n        this.setState({appointment});\r\n    }\r\n\r\n    handleEndDatetimeChange(date) {\r\n        let appointment = {...this.state.appointment};\r\n        appointment.appointmentEndDate = date.toDate();\r\n        this.setState({appointment});\r\n    }\r\n\r\n    handleSuggestionChange = (event, {newValue}) => {\r\n        this.setState({\r\n            value: newValue\r\n        });\r\n    };\r\n\r\n    async componentDidMount() {\r\n        let response = await fetch('/account');\r\n        guests = await response.json();\r\n\r\n        response = await fetch(`/appointment/${this.props.match.params.id}`);\r\n        const body = await response.json();\r\n        let guest = guests.find(a => a.accountId === body.guestId);\r\n        let value = '';\r\n        if (guest) {\r\n             value = guest.firstName + \" \" + guest.lastName;\r\n        }\r\n        this.setState({value: value, appointment: body, isLoading: false});\r\n    }\r\n\r\n    onSuggestionsFetchRequested = ({value}) => {\r\n        this.setState({\r\n            suggestions: getSuggestions(value)\r\n        });\r\n    };\r\n\r\n    onSuggestionsClearRequested = () => {\r\n        this.setState({\r\n            suggestions: []\r\n        });\r\n    };\r\n\r\n    onSuggestionSelected = (event, {suggestion, suggestionValue, index, method}) => {\r\n        event.preventDefault();\r\n        let appointment = {...this.state.appointment};\r\n        appointment.guestId = suggestion.accountId;\r\n        this.setState({appointment});\r\n    };\r\n\r\n    render() {\r\n        const {value, suggestions, appointment, showGuestError, showEmailError, showStartDateError, showEndDateError} = this.state;\r\n\r\n        const inputProps = {\r\n            value,\r\n            onChange: this.handleSuggestionChange\r\n        };\r\n\r\n        return (\r\n            <div><AppNav/>\r\n                <h2 className=\"text-center mt-5\">Edit Appointment</h2>\r\n                <div className=\"container\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col\"/>\r\n                        <div className=\"col\">\r\n                            <Container className=\"mt-5\">\r\n                                <Form onSubmit={this.handleSubmit}>\r\n                                    <FormGroup>\r\n                                        <Label for=\"guest\">Guest</Label>\r\n                                        <Autosuggest\r\n                                            name=\"guest\" id=\"guest\"\r\n                                            suggestions={suggestions}\r\n                                            onSuggestionsFetchRequested={this.onSuggestionsFetchRequested}\r\n                                            onSuggestionsClearRequested={this.onSuggestionsClearRequested}\r\n                                            getSuggestionValue={getSuggestionValue}\r\n                                            renderSuggestion={renderSuggestion}\r\n                                            onSuggestionSelected={this.onSuggestionSelected}\r\n                                            inputProps={inputProps}\r\n                                        />\r\n                                        <p style={{color: 'red'}}>{showGuestError ? 'Missing Guest, make sure to select one from the suggestions' : ''}</p>\r\n                                    </FormGroup>\r\n                                    <FormGroup>\r\n                                        <Label for=\"employeeEmail\">Email of Employee</Label>\r\n                                        <Input type=\"email\" name=\"employeeEmail\" id=\"employeeEmail\" value={appointment.employeeEmail}\r\n                                               onChange={this.handleInputChange}/>\r\n                                        <p style={{color: 'red'}}>{showEmailError ? 'Missing Email' : ''}</p>\r\n                                    </FormGroup>\r\n                                    <FormGroup>\r\n                                        <Label for=\"appointmentStartDate\">Appointment Start Date</Label>\r\n                                        <Datetime type=\"text\" name=\"appointmentStartDate\" id=\"appointmentStartDate\" value={new Date(appointment.appointmentStartDate)}\r\n                                                  inputProps={{readOnly: true}}\r\n                                                  locale={'nl'}\r\n                                                  timeFormat=\"HH:mm\"\r\n                                                  onChange={this.handleStartDatetimeChange}/>\r\n                                        <p style={{color: 'red'}}>{showStartDateError ? 'Missing Start Date' : ''}</p>\r\n                                    </FormGroup>\r\n                                    <FormGroup>\r\n                                        <Label for=\"appointmentEndDate\">Appointment End Date</Label>\r\n                                        <Datetime type=\"text\" name=\"appointmentEndDate\" id=\"appointmentEndDate\" value={new Date(appointment.appointmentEndDate)}\r\n                                                  inputProps={{readOnly: true}}\r\n                                                  locale={'nl'}\r\n                                                  timeFormat=\"HH:mm\"\r\n                                                  onChange={this.handleEndDatetimeChange}/>\r\n                                        <p style={{color: 'red'}}>{showEndDateError ? 'Missing End Date' : ''}</p>\r\n                                    </FormGroup>\r\n                                    <FormGroup>\r\n                                        <Button color=\"primary\" type=\"submit\">Save</Button>{' '}\r\n                                        <Button color=\"secondary\" tag={Link} to=\"/home\">Cancel</Button>\r\n                                    </FormGroup>\r\n                                </Form>\r\n                            </Container>\r\n                        </div>\r\n                        <div className=\"col\"/>\r\n                    </div>\r\n                </div>\r\n            </div>);\r\n    }\r\n}\r\n\r\nexport default EditAppointment;"]},"metadata":{},"sourceType":"module"}