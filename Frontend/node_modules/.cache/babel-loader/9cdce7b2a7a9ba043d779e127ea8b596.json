{"ast":null,"code":"var _jsxFileName = \"D:\\\\S3Funny\\\\enigma-parking\\\\Frontend\\\\src\\\\Appointments\\\\EditAppointment.js\";\nimport React, { Component } from 'react';\nimport AppNav from '../AppNav';\nimport '../App.css';\nimport { Container, Form, FormGroup, Input, Label, Button } from 'reactstrap';\nimport { Link } from 'react-router-dom';\nimport Datetime from \"react-datetime\";\nimport Autosuggest from 'react-autosuggest';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet guests;\n\nconst getSuggestions = value => {\n  const inputValue = value.trim().toLowerCase();\n  const inputLength = inputValue.length;\n  return inputLength === 0 ? [] : guests.filter(guest => guest.firstName.toLowerCase().slice(0, inputLength) === inputValue);\n};\n\nconst getSuggestionValue = suggestion => suggestion.firstName + \" \" + suggestion.lastName;\n\nconst renderSuggestion = suggestion => /*#__PURE__*/_jsxDEV(\"span\", {\n  id: suggestion.accountId,\n  children: [suggestion.firstName, \" \", suggestion.lastName]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 23,\n  columnNumber: 5\n}, this);\n\nclass EditAppointment extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSuggestionChange = (event, {\n      newValue\n    }) => {\n      this.setState({\n        value: newValue\n      });\n    };\n\n    this.onSuggestionsFetchRequested = ({\n      value\n    }) => {\n      this.setState({\n        suggestions: getSuggestions(value)\n      });\n    };\n\n    this.onSuggestionsClearRequested = () => {\n      this.setState({\n        suggestions: []\n      });\n    };\n\n    this.onSuggestionSelected = (event, {\n      suggestion,\n      suggestionValue,\n      index,\n      method\n    }) => {\n      event.preventDefault();\n      let appointment = { ...this.state.appointment\n      };\n      appointment.guestId = suggestion.accountId;\n      this.setState({\n        appointment\n      });\n    };\n\n    this.state = {\n      value: '',\n      suggestions: [],\n      appointment: []\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleStartDatetimeChange = this.handleStartDatetimeChange.bind(this);\n    this.handleEndDatetimeChange = this.handleEndDatetimeChange.bind(this);\n  }\n\n  async handleSubmit(event) {\n    event.preventDefault();\n    const appointment = this.state.appointment;\n    await fetch('/appointment', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(appointment)\n    }).then(response => {\n      if (response.ok) {\n        this.props.history.push(\"/calendar\");\n      }\n    });\n  }\n\n  handleInputChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    let appointment = { ...this.state.appointment\n    };\n    appointment[name] = value;\n    this.setState({\n      appointment\n    });\n  }\n\n  handleStartDatetimeChange(date) {\n    let appointment = { ...this.state.appointment\n    };\n    appointment.appointmentStartDate = date.toDate();\n    this.setState({\n      appointment\n    });\n  }\n\n  handleEndDatetimeChange(date) {\n    let appointment = { ...this.state.appointment\n    };\n    appointment.appointmentEndDate = date.toDate();\n    this.setState({\n      appointment\n    });\n  }\n\n  async componentDidMount() {\n    let response = await fetch('/account');\n    guests = await response.json();\n    response = await fetch(`/appointment/${this.props.match.params.id}`);\n    const body = await response.json();\n    let guest = guests.find(a => a.accountId === body.guestId);\n    let value = guest.firstName + \" \" + guest.lastName;\n    this.setState({\n      value: value,\n      appointment: body,\n      isLoading: false\n    });\n  }\n\n  render() {\n    const {\n      value,\n      suggestions,\n      appointment\n    } = this.state;\n    const inputProps = {\n      value,\n      onChange: this.handleSuggestionChange\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(AppNav, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-center mt-5\",\n        children: \"Edit Appointment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col\",\n            children: /*#__PURE__*/_jsxDEV(Container, {\n              className: \"mt-5\",\n              children: /*#__PURE__*/_jsxDEV(Form, {\n                onSubmit: this.handleSubmit,\n                children: [/*#__PURE__*/_jsxDEV(FormGroup, {\n                  children: [/*#__PURE__*/_jsxDEV(Label, {\n                    for: \"guest\",\n                    children: \"Guest\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 136,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Autosuggest, {\n                    name: \"guest\",\n                    id: \"guest\",\n                    suggestions: suggestions,\n                    onSuggestionsFetchRequested: this.onSuggestionsFetchRequested,\n                    onSuggestionsClearRequested: this.onSuggestionsClearRequested,\n                    getSuggestionValue: getSuggestionValue,\n                    renderSuggestion: renderSuggestion,\n                    onSuggestionSelected: this.onSuggestionSelected,\n                    inputProps: inputProps\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 137,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 135,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n                  children: [/*#__PURE__*/_jsxDEV(Label, {\n                    for: \"employeeEmail\",\n                    children: \"Email of Employee\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 149,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Input, {\n                    type: \"email\",\n                    name: \"employeeEmail\",\n                    id: \"employeeEmail\",\n                    value: appointment.employeeEmail,\n                    onChange: this.handleInputChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 150,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n                  children: [/*#__PURE__*/_jsxDEV(Label, {\n                    for: \"appointmentStartDate\",\n                    children: \"Appointment Start Date\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 154,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Datetime, {\n                    type: \"text\",\n                    name: \"appointmentStartDate\",\n                    id: \"appointmentStartDate\",\n                    value: new Date(appointment.appointmentStartDate),\n                    inputProps: {\n                      readOnly: true\n                    },\n                    locale: 'nl',\n                    timeFormat: \"HH:mm\",\n                    onChange: this.handleStartDatetimeChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 155,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n                  children: [/*#__PURE__*/_jsxDEV(Label, {\n                    for: \"appointmentEndDate\",\n                    children: \"Appointment End Date\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 162,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Datetime, {\n                    type: \"text\",\n                    name: \"appointmentEndDate\",\n                    id: \"appointmentEndDate\",\n                    value: new Date(appointment.appointmentEndDate),\n                    inputProps: {\n                      readOnly: true\n                    },\n                    locale: 'nl',\n                    timeFormat: \"HH:mm\",\n                    onChange: this.handleEndDatetimeChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 163,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 161,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n                  children: [/*#__PURE__*/_jsxDEV(Button, {\n                    color: \"primary\",\n                    type: \"submit\",\n                    children: \"Save\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 170,\n                    columnNumber: 41\n                  }, this), ' ', /*#__PURE__*/_jsxDEV(Button, {\n                    color: \"secondary\",\n                    tag: Link,\n                    to: \"/home\",\n                    children: \"Cancel\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 171,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 169,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default EditAppointment;","map":{"version":3,"sources":["D:/S3Funny/enigma-parking/Frontend/src/Appointments/EditAppointment.js"],"names":["React","Component","AppNav","Container","Form","FormGroup","Input","Label","Button","Link","Datetime","Autosuggest","guests","getSuggestions","value","inputValue","trim","toLowerCase","inputLength","length","filter","guest","firstName","slice","getSuggestionValue","suggestion","lastName","renderSuggestion","accountId","EditAppointment","constructor","props","handleSuggestionChange","event","newValue","setState","onSuggestionsFetchRequested","suggestions","onSuggestionsClearRequested","onSuggestionSelected","suggestionValue","index","method","preventDefault","appointment","state","guestId","handleSubmit","bind","handleInputChange","handleStartDatetimeChange","handleEndDatetimeChange","fetch","headers","body","JSON","stringify","then","response","ok","history","push","target","name","date","appointmentStartDate","toDate","appointmentEndDate","componentDidMount","json","match","params","id","find","a","isLoading","render","inputProps","onChange","employeeEmail","Date","readOnly"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport AppNav from '../AppNav';\r\nimport '../App.css';\r\nimport {Container, Form, FormGroup, Input, Label, Button} from 'reactstrap';\r\nimport {Link} from 'react-router-dom';\r\nimport Datetime from \"react-datetime\";\r\nimport Autosuggest from 'react-autosuggest';\r\n\r\nlet guests;\r\n\r\nconst getSuggestions = value => {\r\n    const inputValue = value.trim().toLowerCase();\r\n    const inputLength = inputValue.length;\r\n\r\n    return inputLength === 0 ? [] : guests.filter(guest =>\r\n        guest.firstName.toLowerCase().slice(0, inputLength) === inputValue\r\n    );\r\n};\r\n\r\nconst getSuggestionValue = suggestion => suggestion.firstName + \" \" + suggestion.lastName;\r\n\r\nconst renderSuggestion = suggestion => (\r\n    <span id={suggestion.accountId}>\r\n        {suggestion.firstName} {suggestion.lastName}\r\n    </span>\r\n);\r\n\r\nclass EditAppointment extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            value: '',\r\n            suggestions: [],\r\n            appointment: []\r\n        };\r\n\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handleInputChange = this.handleInputChange.bind(this);\r\n        this.handleStartDatetimeChange = this.handleStartDatetimeChange.bind(this);\r\n        this.handleEndDatetimeChange = this.handleEndDatetimeChange.bind(this);\r\n    }\r\n\r\n    async handleSubmit(event) {\r\n        event.preventDefault();\r\n        const appointment = this.state.appointment;\r\n        await fetch('/appointment', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(appointment),\r\n        }).then((response) => {\r\n            if (response.ok) {\r\n                this.props.history.push(\"/calendar\");\r\n            }\r\n        });\r\n    }\r\n\r\n    handleInputChange(event) {\r\n        const target = event.target;\r\n        const value = target.value;\r\n        const name = target.name;\r\n        let appointment = {...this.state.appointment};\r\n        appointment[name] = value;\r\n        this.setState({appointment});\r\n    }\r\n\r\n    handleStartDatetimeChange(date) {\r\n        let appointment = {...this.state.appointment};\r\n        appointment.appointmentStartDate = date.toDate();\r\n        this.setState({appointment});\r\n    }\r\n\r\n    handleEndDatetimeChange(date) {\r\n        let appointment = {...this.state.appointment};\r\n        appointment.appointmentEndDate = date.toDate();\r\n        this.setState({appointment});\r\n    }\r\n\r\n    handleSuggestionChange = (event, {newValue}) => {\r\n        this.setState({\r\n            value: newValue\r\n        });\r\n    };\r\n\r\n    async componentDidMount() {\r\n        let response = await fetch('/account');\r\n        guests = await response.json();\r\n\r\n        response = await fetch(`/appointment/${this.props.match.params.id}`);\r\n        const body = await response.json();\r\n        let guest = guests.find(a => a.accountId === body.guestId);\r\n        let value = guest.firstName + \" \" + guest.lastName;\r\n        this.setState({value: value, appointment: body, isLoading: false});\r\n    }\r\n\r\n    onSuggestionsFetchRequested = ({value}) => {\r\n        this.setState({\r\n            suggestions: getSuggestions(value)\r\n        });\r\n    };\r\n\r\n    onSuggestionsClearRequested = () => {\r\n        this.setState({\r\n            suggestions: []\r\n        });\r\n    };\r\n\r\n    onSuggestionSelected = (event, {suggestion, suggestionValue, index, method}) => {\r\n        event.preventDefault();\r\n        let appointment = {...this.state.appointment};\r\n        appointment.guestId = suggestion.accountId;\r\n        this.setState({appointment});\r\n    };\r\n\r\n    render() {\r\n        const {value, suggestions, appointment} = this.state;\r\n\r\n        const inputProps = {\r\n            value,\r\n            onChange: this.handleSuggestionChange\r\n        };\r\n\r\n        return (\r\n            <div><AppNav/>\r\n                <h2 className=\"text-center mt-5\">Edit Appointment</h2>\r\n                <div className=\"container\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col\"/>\r\n                        <div className=\"col\">\r\n                            <Container className=\"mt-5\">\r\n                                <Form onSubmit={this.handleSubmit}>\r\n                                    <FormGroup>\r\n                                        <Label for=\"guest\">Guest</Label>\r\n                                        <Autosuggest\r\n                                            name=\"guest\" id=\"guest\"\r\n                                            suggestions={suggestions}\r\n                                            onSuggestionsFetchRequested={this.onSuggestionsFetchRequested}\r\n                                            onSuggestionsClearRequested={this.onSuggestionsClearRequested}\r\n                                            getSuggestionValue={getSuggestionValue}\r\n                                            renderSuggestion={renderSuggestion}\r\n                                            onSuggestionSelected={this.onSuggestionSelected}\r\n                                            inputProps={inputProps}\r\n                                        />\r\n                                    </FormGroup>\r\n                                    <FormGroup>\r\n                                        <Label for=\"employeeEmail\">Email of Employee</Label>\r\n                                        <Input type=\"email\" name=\"employeeEmail\" id=\"employeeEmail\" value={appointment.employeeEmail}\r\n                                               onChange={this.handleInputChange}/>\r\n                                    </FormGroup>\r\n                                    <FormGroup>\r\n                                        <Label for=\"appointmentStartDate\">Appointment Start Date</Label>\r\n                                        <Datetime type=\"text\" name=\"appointmentStartDate\" id=\"appointmentStartDate\" value={new Date(appointment.appointmentStartDate)}\r\n                                                  inputProps={{readOnly: true}}\r\n                                                  locale={'nl'}\r\n                                                  timeFormat=\"HH:mm\"\r\n                                                  onChange={this.handleStartDatetimeChange}/>\r\n                                    </FormGroup>\r\n                                    <FormGroup>\r\n                                        <Label for=\"appointmentEndDate\">Appointment End Date</Label>\r\n                                        <Datetime type=\"text\" name=\"appointmentEndDate\" id=\"appointmentEndDate\" value={new Date(appointment.appointmentEndDate)}\r\n                                                  inputProps={{readOnly: true}}\r\n                                                  locale={'nl'}\r\n                                                  timeFormat=\"HH:mm\"\r\n                                                  onChange={this.handleEndDatetimeChange}/>\r\n                                    </FormGroup>\r\n                                    <FormGroup>\r\n                                        <Button color=\"primary\" type=\"submit\">Save</Button>{' '}\r\n                                        <Button color=\"secondary\" tag={Link} to=\"/home\">Cancel</Button>\r\n                                    </FormGroup>\r\n                                </Form>\r\n                            </Container>\r\n                        </div>\r\n                        <div className=\"col\"/>\r\n                    </div>\r\n                </div>\r\n            </div>);\r\n    }\r\n}\r\n\r\nexport default EditAppointment;"]},"metadata":{},"sourceType":"module"}