{"ast":null,"code":"import _regeneratorRuntime from\"D:/S3Funny/enigma-parking/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/S3Funny/enigma-parking/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:/S3Funny/enigma-parking/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/S3Funny/enigma-parking/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"D:/S3Funny/enigma-parking/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"D:/S3Funny/enigma-parking/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/S3Funny/enigma-parking/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Table,Button}from\"reactstrap\";import AppNav from\"../AppNav\";import Modal from\"react-bootstrap/Modal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var GuestList=/*#__PURE__*/function(_Component){_inherits(GuestList,_Component);var _super=_createSuper(GuestList);function GuestList(props){var _this;_classCallCheck(this,GuestList);_this=_super.call(this,props);_this.state={isLoading:true,selectedGuest:[],showDeleteDialog:false,guests:[]};_this.editGuest=_this.editGuest.bind(_assertThisInitialized(_this));_this.deleteGuest=_this.deleteGuest.bind(_assertThisInitialized(_this));_this.openDeleteDialog=_this.openDeleteDialog.bind(_assertThisInitialized(_this));_this.closeDeleteDialog=_this.closeDeleteDialog.bind(_assertThisInitialized(_this));return _this;}_createClass(GuestList,[{key:\"editGuest\",value:function editGuest(id){this.props.history.push(\"/editGuest/\".concat(id));}},{key:\"openDeleteDialog\",value:function openDeleteDialog(guest){this.setState({selectedGuest:guest});this.setState({showDeleteDialog:true});}},{key:\"closeDeleteDialog\",value:function closeDeleteDialog(){this.setState({showDeleteDialog:false});}},{key:\"deleteGuest\",value:function(){var _deleteGuest=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;var id;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:id=this.state.selectedGuest.accountId;_context.next=3;return fetch(\"/account/\".concat(id),{method:'DELETE',headers:{'Accept':'application/json','Content-Type':'application/json'}}).then(function(){var updatedGuests=_this2.state.guests;updatedGuests.splice(updatedGuests.findIndex(function(i){return i.accountId===id;}),1);_this2.setState({guests:updatedGuests,showDeleteDialog:false});});case 3:case\"end\":return _context.stop();}}},_callee,this);}));function deleteGuest(){return _deleteGuest.apply(this,arguments);}return deleteGuest;}()},{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,body;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch('/account');case 2:response=_context2.sent;_context2.next=5;return response.json();case 5:body=_context2.sent;this.setState({guests:body,isLoading:false});case 7:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,guests=_this$state.guests,isLoading=_this$state.isLoading,showDeleteDialog=_this$state.showDeleteDialog,selectedGuest=_this$state.selectedGuest;if(isLoading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});var rows=guests.map(function(guest){return/*#__PURE__*/_jsxs(\"tr\",{id:guest.accountId,children:[/*#__PURE__*/_jsx(\"td\",{children:guest.firstName}),/*#__PURE__*/_jsx(\"td\",{children:guest.lastName}),/*#__PURE__*/_jsx(\"td\",{children:guest.licensePlate}),/*#__PURE__*/_jsx(\"td\",{children:guest.phoneNumber}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Button,{style:{marginRight:'10px'},size:\"sm\",color:\"primary\",onClick:function onClick(){return _this3.editGuest(guest.accountId);},children:\"Edit\"}),/*#__PURE__*/_jsx(Button,{size:\"sm\",color:\"danger\",onClick:function onClick(){return _this3.openDeleteDialog(guest);},children:\"Delete\"})]})]});});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(AppNav,{}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mt-5\",children:\"Guest List\"}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-1\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-10\",children:/*#__PURE__*/_jsx(Table,{className:\"mt-4\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"First Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Last Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"License Plate\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Telephone Number\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Options\"})]}),rows]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1\"})]})}),/*#__PURE__*/_jsxs(Modal,{show:showDeleteDialog,onHide:function onHide(){return _this3.closeDeleteDialog();},children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Delete Guest\"})}),/*#__PURE__*/_jsxs(Modal.Body,{children:[\"Are you sure you want to delete this guest?\",/*#__PURE__*/_jsx(\"br\",{}),selectedGuest.firstName,\" \",selectedGuest.lastName]}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{color:\"danger\",onClick:function onClick(){return _this3.deleteGuest();},children:\"Delete\"}),/*#__PURE__*/_jsx(Button,{color:\"primary\",onClick:function onClick(){return _this3.closeDeleteDialog();},children:\"Cancel\"})]})]})]});}}]);return GuestList;}(Component);export default GuestList;","map":{"version":3,"sources":["D:/S3Funny/enigma-parking/src/Guests/GuestList.js"],"names":["React","Component","Table","Button","AppNav","Modal","GuestList","props","state","isLoading","selectedGuest","showDeleteDialog","guests","editGuest","bind","deleteGuest","openDeleteDialog","closeDeleteDialog","id","history","push","guest","setState","accountId","fetch","method","headers","then","updatedGuests","splice","findIndex","i","response","json","body","rows","map","firstName","lastName","licensePlate","phoneNumber","marginRight"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport {Table, Button} from \"reactstrap\";\r\nimport AppNav from \"../AppNav\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\n\r\nclass GuestList extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            isLoading: true,\r\n            selectedGuest: [],\r\n            showDeleteDialog: false,\r\n            guests: []\r\n        };\r\n\r\n        this.editGuest = this.editGuest.bind(this);\r\n        this.deleteGuest = this.deleteGuest.bind(this);\r\n        this.openDeleteDialog = this.openDeleteDialog.bind(this);\r\n        this.closeDeleteDialog = this.closeDeleteDialog.bind(this);\r\n    }\r\n\r\n    editGuest(id) {\r\n        this.props.history.push(`/editGuest/${id}`);\r\n    }\r\n\r\n    openDeleteDialog(guest) {\r\n        this.setState({selectedGuest: guest});\r\n        this.setState({showDeleteDialog: true});\r\n    }\r\n\r\n    closeDeleteDialog() {\r\n        this.setState({showDeleteDialog: false});\r\n    }\r\n\r\n    async deleteGuest() {\r\n        const id = this.state.selectedGuest.accountId;\r\n        await fetch(`/account/${id}`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then(() => {\r\n            let updatedGuests = this.state.guests;\r\n            updatedGuests.splice(updatedGuests.findIndex(function(i){\r\n                return i.accountId === id;\r\n            }), 1);\r\n            this.setState({guests: updatedGuests, showDeleteDialog: false});\r\n        });\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const response = await fetch('/account');\r\n        const body = await response.json();\r\n        this.setState({guests: body, isLoading: false});\r\n    }\r\n\r\n    render() {\r\n        const {guests, isLoading, showDeleteDialog, selectedGuest} = this.state;\r\n\r\n        if (isLoading)\r\n            return (<div>Loading...</div>)\r\n\r\n        let rows =\r\n            guests.map(guest =>\r\n                <tr id={guest.accountId}>\r\n                    <td>{guest.firstName}</td>\r\n                    <td>{guest.lastName}</td>\r\n                    <td>{guest.licensePlate}</td>\r\n                    <td>{guest.phoneNumber}</td>\r\n                    <td><Button style={{marginRight: '10px'}} size=\"sm\" color=\"primary\"\r\n                                onClick={() => this.editGuest(guest.accountId)}>Edit</Button>\r\n                        <Button size=\"sm\" color=\"danger\" onClick={() => this.openDeleteDialog(guest)}>Delete</Button>\r\n                    </td>\r\n                </tr>\r\n            );\r\n\r\n        return (\r\n            <div><AppNav/>\r\n                <h2 className=\"text-center mt-5\">Guest List</h2>\r\n                <div className=\"container\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-1\"></div>\r\n                        <div className=\"col-10\">\r\n                            <Table className=\"mt-4\">\r\n                                <tbody>\r\n                                <tr>\r\n                                    <th>First Name</th>\r\n                                    <th>Last Name</th>\r\n                                    <th>License Plate</th>\r\n                                    <th>Telephone Number</th>\r\n                                    <th>Options</th>\r\n                                </tr>\r\n                                {rows}\r\n                                </tbody>\r\n                            </Table>\r\n                        </div>\r\n                        <div className=\"col-1\"></div>\r\n                    </div>\r\n                </div>\r\n                <Modal show={showDeleteDialog} onHide={() => this.closeDeleteDialog()}>\r\n                    <Modal.Header closeButton>\r\n                        <Modal.Title>Delete Guest</Modal.Title>\r\n                    </Modal.Header>\r\n                    <Modal.Body>Are you sure you want to delete this guest?<br/>\r\n                        {selectedGuest.firstName} {selectedGuest.lastName}</Modal.Body>\r\n                    <Modal.Footer>\r\n                        <Button color=\"danger\" onClick={() => this.deleteGuest()}>\r\n                            Delete\r\n                        </Button>\r\n                        <Button color=\"primary\" onClick={() => this.closeDeleteDialog()}>\r\n                            Cancel\r\n                        </Button>\r\n                    </Modal.Footer>\r\n                </Modal>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default GuestList;\r\n"]},"metadata":{},"sourceType":"module"}